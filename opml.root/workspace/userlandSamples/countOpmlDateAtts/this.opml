<?xml version="1.0" encoding="ISO-8859-1"?>
<!-- OPML generated by OPML Editor v10.1b19 on Sat, 03 Jun 2017 03:26:04 GMT -->
<opml version="2.0">
	<head>
		<title>workspace.userlandSamples.countOpmlDateAtts</title>
		<dateCreated>Fri, 06 Sep 2013 13:34:16 GMT</dateCreated>
		<dateModified>Sat, 03 Jun 2017 03:26:04 GMT</dateModified>
		<ownerName>Dave Winer</ownerName>
		<ownerId>http://davewiner.com/</ownerId>
		<expansionState>1, 2, 3, 9, 11, 12, 19</expansionState>
		<vertScrollState>1</vertScrollState>
		<windowTop>241</windowTop>
		<windowLeft>1115</windowLeft>
		<windowBottom>794</windowBottom>
		<windowRight>1814</windowRight>
		</head>
	<body>
		<outline text="on countOpmlDateAtts (url)">
			<outline text="Changes" isComment="true">
				<outline text="9/6/13; 9:34:22 AM by DW">
					<outline text="This script loops over an outline and gathers the date attributes into a table, allowing you to quickly see if there are duplicates. I needed to find out if this was happening because I had built the Find command on the assumption that the created att made a good node identifier. In the example I was looking at, this was clearly not true! :-)"/>
					</outline>
				</outline>
			<outline text="local (adrtable = @scratchpad.datesFromOutline, xstruct)"/>
			<outline text="xml.compile (tcp.httpreadurl (url), @xstruct)"/>
			<outline text="scratchpad.xstruct = xstruct" isComment="true"/>
			<outline text="new (tabletype, adrtable)"/>
			<outline text="on dolevel (adrlevel)">
				<outline text="local (adr)"/>
				<outline text="for adr in adrlevel">
					<outline text="if nameof (adr^) endswith &quot;outline&quot;">
						<outline text="local (adrcreated = @adr^.[&quot;/atts&quot;].created)"/>
						<outline text="if defined (adrcreated^)">
							<outline text="local (adrdate = @adrtable^.[adrcreated^])"/>
							<outline text="if defined (adrdate^)">
								<outline text="adrdate^++"/>
								</outline>
							<outline text="else">
								<outline text="adrdate^ = 1"/>
								</outline>
							</outline>
						<outline text="dolevel (adr)"/>
						</outline>
					</outline>
				</outline>
			<outline text="dolevel (xml.opml.getbodyaddress (@xstruct))"/>
			<outline text="edit (adrtable)"/>
			<outline text="table.sortby (&quot;Value&quot;)"/>
			</outline>
		<outline text="bundle //test code">
			<outline text="countOpmlDateAtts (&quot;http://ronchester.smallpict.com/?format=opml&quot;)"/>
			</outline>
		</body>
	</opml>
