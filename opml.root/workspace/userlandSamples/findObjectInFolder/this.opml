<?xml version="1.0" encoding="ISO-8859-1"?>
<!-- OPML generated by OPML Editor v10.1b19 on Sat, 03 Jun 2017 03:19:10 GMT -->
<opml version="2.0">
	<head>
		<title>workspace.userlandSamples.findObjectInFolder</title>
		<dateCreated>Tue, 17 Jan 2012 14:06:21 GMT</dateCreated>
		<dateModified>Sat, 03 Jun 2017 03:19:10 GMT</dateModified>
		<ownerName>Dave Winer</ownerName>
		<ownerId>http://davewiner.com/</ownerId>
		<expansionState>1, 2, 3, 9, 12, 14, 15, 19</expansionState>
		<vertScrollState>1</vertScrollState>
		<windowTop>240</windowTop>
		<windowLeft>820</windowLeft>
		<windowBottom>804</windowBottom>
		<windowRight>1583</windowRight>
		</head>
	<body>
		<outline text="on findObjectInFolder (adrobject, folder)">
			<outline text="Changes" isComment="true">
				<outline text="1/17/12; 10:06:24 AM by DW">
					<outline text="Loop over the files in a folder, looking for a file that's a backup of a given odb object. Useful for scanning the rootbackups folder for an old version of some object, if you're not sure when it changed. "/>
					</outline>
				</outline>
			<outline text="local (f, s, atts, adroutline = @scratchpad.foundObjects)"/>
			<outline text="new (outlinetype, adroutline)"/>
			<outline text="target.set (adroutline)"/>
			<outline text="edit (adroutline)"/>
			<outline text="fileloop (f in folder, infinity)">
				<outline text="msg (f)"/>
				<outline text="s = string (file.readwholefile (f))"/>
				<outline text="if fatPages.dataIsFat (@s)">
					<outline text="fatPages.getPageAtts (@s, @atts)"/>
					<outline text="try">
						<outline text="if address (atts.adrpagedata) == adrobject">
							<outline text="op.insert (f - folder, up)"/>
							</outline>
						<outline text="scratchpad.atts = atts" isComment="true"/>
						</outline>
					</outline>
				</outline>
			<outline text="op.go (down, infinity); op.deleteline (); op.firstsummit ()"/>
			</outline>
		<outline text="bundle //test code">
			<outline text="local (folder = frontier.getsubfolder (&quot;/ops/rootUpdateBackups/&quot;))"/>
			<outline text="findObjectInFolder (@opmlEditor.data.outlines.prefs, folder)"/>
			</outline>
		</body>
	</opml>
