<?xml version="1.0" encoding="ISO-8859-1"?>
<!-- OPML generated by OPML Editor v10.1b19 on Sat, 03 Jun 2017 03:39:04 GMT -->
<opml version="2.0">
	<head>
		<title>workspace.userlandSamples.checkS3Folder</title>
		<dateCreated>Wed, 02 Jan 2013 12:58:36 GMT</dateCreated>
		<dateModified>Sat, 03 Jun 2017 03:39:04 GMT</dateModified>
		<ownerName>Dave Winer</ownerName>
		<ownerId>http://davewiner.com/</ownerId>
		<expansionState>1, 2, 3, 7, 11, 13, 16, 18, 21</expansionState>
		<vertScrollState>1</vertScrollState>
		<windowTop>253</windowTop>
		<windowLeft>885</windowLeft>
		<windowBottom>957</windowBottom>
		<windowRight>2150</windowRight>
		</head>
	<body>
		<outline text="on checkS3Folder ()">
			<outline text="Changes" isComment="true">
				<outline text="1/2/13; 8:58:39 AM by DW">
					<outline text="I just uploaded all of the static files on scripting.com to a bucket on S3. This script verifies that they're all there, and reports any that are missing. Important -- work with a copy of the folder you're checking. Once we've verified thatva file exists on S3, we delete it in the local folder. This means the search can be restarted without having to check files that we've already verified are there. "/>
					</outline>
				</outline>
			<outline text="local (folder = &quot;Macintosh HD:Users:davewiner:Downloads:work area:scripting.com:&quot;, s3path = &quot;/scripting.com/&quot;, relpath)"/>
			<outline text="local (adroutline = @scratchpad.missingS3files)"/>
			<outline text="bundle //set up outline">
				<outline text="new (outlinetype, adroutline)"/>
				<outline text="target.set (adroutline)"/>
				<outline text="edit (adroutline)"/>
				</outline>
			<outline text="fileloop (f in folder, infinity)">
				<outline text="relpath = s3path + string.replaceall (string.delete (f, 1, sizeof (folder)), &quot;:&quot;, &quot;/&quot;)"/>
				<outline text="if relpath contains &quot;.DS_Store&quot;">
					<outline text="continue"/>
					</outline>
				<outline text="msg (relpath)"/>
				<outline text="if s3.objectExists (relpath)">
					<outline text="file.delete (f)"/>
					</outline>
				<outline text="else">
					<outline text="op.insert (relpath, up)"/>
					</outline>
				<outline text="scratchpad.lastfilechecked = relpath"/>
				</outline>
			</outline>
		<outline text="bundle //test code">
			<outline text="checkS3Folder ()"/>
			</outline>
		</body>
	</opml>
