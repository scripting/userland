<?xml version="1.0" encoding="ISO-8859-1"?>
<!-- OPML generated by OPML Editor v10.1b19 on Sat, 03 Jun 2017 03:36:20 GMT -->
<opml version="2.0">
	<head>
		<title>workspace.userlandSamples.outlineDomains</title>
		<dateCreated>Tue, 14 Feb 2012 15:54:23 GMT</dateCreated>
		<dateModified>Sat, 03 Jun 2017 03:36:20 GMT</dateModified>
		<ownerName>Dave Winer</ownerName>
		<ownerId>http://davewiner.com/</ownerId>
		<expansionState>1, 2, 3, 9, 14, 16, 18, 20</expansionState>
		<vertScrollState>1</vertScrollState>
		<windowTop>199</windowTop>
		<windowLeft>1114</windowLeft>
		<windowBottom>866</windowBottom>
		<windowRight>2101</windowRight>
		</head>
	<body>
		<outline text="on outlineDomains (adrtable)">
			<outline text="Changes" isComment="true">
				<outline text="2/14/12; 11:54:26 AM by DW">
					<outline text="Using our Amazon Route53 interface, create an outline with your domains at the top level, and underneath them, the records in each domain. I needed this to help me locate all the cnames that point to a domain that I need to move. How sweet to finally have a programmable DNS."/>
					</outline>
				</outline>
			<outline text="local (zones, adrzone, adrrecord)"/>
			<outline text="s3.route53.listHostedZones (@zones)"/>
			<outline text="scratchpad.zones = zones" isComment="true"/>
			<outline text="new (tabletype, adrtable)"/>
			<outline text="for adrzone in @zones">
				<outline text="local (adrsub = @adrtable^.[adrzone^.name])"/>
				<outline text="new (tabletype, adrsub)"/>
				<outline text="s3.route53.listRecords (nameof (adrzone^), @records)"/>
				<outline text="scratchpad.records = records" isComment="true"/>
				<outline text="for adrrecord in @records">
					<outline text="local (adrsubsub = @adrsub^.[nameof (adrrecord^)])"/>
					<outline text="if adrrecord^.type == &quot;CNAME&quot;">
						<outline text="adrsubsub^ = adrrecord^.value"/>
						</outline>
					<outline text="else">
						<outline text="adrsubsub^ = adrrecord^"/>
						</outline>
					</outline>
				</outline>
			</outline>
		<outline text="bundle //test code">
			<outline text="local (opmltext)"/>
			<outline text="outlineDomains (@scratchpad.tableOutline)"/>
			<outline text="opmltext = xml.opml.getOpmlText (@scratchpad.tableOutline, &quot;My Domains and CNAMEs&quot;, valueName:&quot;cname&quot;)"/>
			<outline text="op.newoutlineobject (opmltext, @scratchpad.myDomains)"/>
			</outline>
		</body>
	</opml>
