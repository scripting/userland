<?xml version="1.0" encoding="ISO-8859-1"?>
<!-- OPML generated by OPML Editor v10.1b19 on Fri, 02 Jun 2017 18:17:02 GMT -->
<opml version="2.0">
	<head>
		<title>workspace.userlandSamples.whichDomainsAreHostedHere</title>
		<dateCreated>Thu, 02 Dec 2010 15:02:55 GMT</dateCreated>
		<dateModified>Thu, 02 Dec 2010 15:33:19 GMT</dateModified>
		<ownerName>Dave Winer</ownerName>
		<ownerId>http://davewiner.com/</ownerId>
		<expansionState>1, 2</expansionState>
		<vertScrollState>1</vertScrollState>
		<windowTop>296</windowTop>
		<windowLeft>885</windowLeft>
		<windowBottom>922</windowBottom>
		<windowRight>1656</windowRight>
		</head>
	<body>
		<outline text="Changes" isComment="true">
			<outline text="12/2/10; 10:49:43 AM by DW">
				<outline text="Sometimes I move around domains and content and lose track of which domains are still hosted on the server I'm looking at. This script tells me for sure."/>
				</outline>
			</outline>
		<outline text="local (adroutline = @workspace.userlandsamples.domains, adrdomain)"/>
		<outline text="local (myAddress = tcp.dns.getdottedid (&quot;ec2.scripting.com&quot;), dir = right)"/>
		<outline text="new (outlinetype, adroutline)"/>
		<outline text="target.set (adroutline)"/>
		<outline text="edit (adroutline)"/>
		<outline text="op.setlinetext (&quot;Good domains&quot;)"/>
		<outline text="on addlinkatt (url)">
			<outline text="local (atts)"/>
			<outline text="new (tabletype, @atts)"/>
			<outline text="atts.type = &quot;link&quot;"/>
			<outline text="atts.url = &quot;http://&quot; + domain + &quot;/&quot;"/>
			<outline text="op.attributes.addgroup (@atts)"/>
			</outline>
		<outline text="for adrdomain in @config.mainresponder.domains">
			<outline text="local (domain = nameof (adrdomain^))"/>
			<outline text="try">
				<outline text="if tcp.dns.getdottedid (domain) == myAddress">
					<outline text="op.insert (domain, dir); dir = down"/>
					<outline text="addlinkatt (&quot;http://&quot; + domain + &quot;/&quot;)"/>
					</outline>
				</outline>
			</outline>
		<outline text="op.go (left, 1); op.insert (&quot;Bad domains&quot;, down); dir = right"/>
		<outline text="for adrdomain in @config.mainresponder.domains">
			<outline text="local (domain = nameof (adrdomain^), flgood = true, ip = &quot;&quot;)"/>
			<outline text="try">
				<outline text="ip = tcp.dns.getdottedid (domain)"/>
				<outline text="if ip != myAddress">
					<outline text="flgood = false"/>
					</outline>
				</outline>
			<outline text="else">
				<outline text="flgood = false"/>
				</outline>
			<outline text="if not flgood">
				<outline text="if ip == &quot;&quot;">
					<outline text="op.insert (domain, dir)"/>
					</outline>
				<outline text="else">
					<outline text="op.insert (domain + &quot; = &quot; + ip, dir) "/>
					<outline text="addlinkatt (&quot;http://&quot; + domain + &quot;/&quot;)"/>
					</outline>
				<outline text="dir = down"/>
				</outline>
			</outline>
		</body>
	</opml>
