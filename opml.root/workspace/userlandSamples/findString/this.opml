<?xml version="1.0" encoding="ISO-8859-1"?>
<!-- OPML generated by OPML Editor v10.1b19 on Sat, 03 Jun 2017 03:36:15 GMT -->
<opml version="2.0">
	<head>
		<title>workspace.userlandSamples.findString</title>
		<dateCreated>Fri, 23 Feb 2001 05:05:07 GMT</dateCreated>
		<dateModified>Sat, 03 Jun 2017 03:36:15 GMT</dateModified>
		<ownerName>Dave Winer</ownerName>
		<ownerId>http://davewiner.com/</ownerId>
		<expansionState>1, 4</expansionState>
		<vertScrollState>1</vertScrollState>
		<windowTop>50</windowTop>
		<windowLeft>50</windowLeft>
		<windowBottom>470</windowBottom>
		<windowRight>550</windowRight>
		</head>
	<body>
		<outline text="1/13/01; 9:13:34 AM by DW" isComment="true">
			<outline text="Visit all objects in all open databases looking for objects that contain a string you enter in a dialog. Create a list in scratchpad.objectsThatContainString."/>
			<outline text="Changes:">
				<outline text="2/22/01; 3:07:24 PM by PBS">
					<outline text="Do a case-inensitive search."/>
					</outline>
				</outline>
			</outline>
		<outline text="if dialog.ask (&quot;What string would you like to search for?&quot;, @scratchpad.lastsearchstring)">
			<outline text="local (lowerSearchString = string.lower (scratchpad.lastsearchstring)) //PBS 02/22/01: case-insensitive"/>
			<outline text="local (ct = 0)"/>
			<outline text="local (adroutline = @scratchpad.objectsThatContainString, insertdir = right)"/>
			<outline text="bundle //set up the outline">
				<outline text="new (outlinetype, adroutline); edit (adroutline)"/>
				<outline text="target.set (adroutline)"/>
				<outline text="op.firstsummit ()"/>
				<outline text="op.setlinetext (&quot;Objects that contain \&quot;&quot; + scratchpad.lastsearchstring + &quot;\&quot; on &quot; + clock.now () + &quot;:&quot;)"/>
				</outline>
			<outline text="window.about ()"/>
			<outline text="on dotable (adrtable)">
				<outline text="on addadr (adr)">
					<outline text="if adr == @scratchpad.lastsearchstring">
						<outline text="return"/>
						</outline>
					<outline text="local (s = string (adr))"/>
					<outline text="local (pattern = &quot;\&quot;].&quot;)"/>
					<outline text="local (ix = string.patternmatch (pattern, s))"/>
					<outline text="if ix &gt; 0">
						<outline text="s = string.delete (s, 1, ix + sizeof (pattern) - 1)"/>
						</outline>
					<outline text="op.insert (s + &quot; (&quot; + sizeof (adr^) + &quot;)&quot;, insertdir); insertdir = down"/>
					</outline>
				<outline text="local (adr)"/>
				<outline text="for adr in adrtable">
					<outline text="case typeof (adr^)">
						<outline text="tabletype">
							<outline text="dotable (adr)"/>
							</outline>
						</outline>
					<outline text="else">
						<outline text="try">
							<outline text="if string.lower (string (adr^)) contains lowerSearchString //PBS 02/22/01: case-inensitive">
								<outline text="addadr (adr)"/>
								</outline>
							</outline>
						</outline>
					<outline text="if (++ct % 1000) == 0">
						<outline text="msg (ct)"/>
						<outline text="filemenu.save ()"/>
						</outline>
					</outline>
				<outline text="return (true)"/>
				</outline>
			<outline text="dotable (@root)"/>
			<outline text="op.firstsummit ()"/>
			<outline text="edit (adroutline)"/>
			<outline text="msg (&quot;&quot;)"/>
			</outline>
		</body>
	</opml>
