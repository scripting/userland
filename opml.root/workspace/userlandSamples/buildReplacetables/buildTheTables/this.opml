<?xml version="1.0" encoding="ISO-8859-1"?>
<!-- OPML generated by OPML Editor v10.1b19 on Sat, 03 Jun 2017 03:19:06 GMT -->
<opml version="2.0">
	<head>
		<title>workspace.userlandSamples.buildReplacetables.buildTheTables</title>
		<dateCreated>Mon, 13 Aug 2012 11:43:09 GMT</dateCreated>
		<dateModified>Sat, 03 Jun 2017 03:19:06 GMT</dateModified>
		<ownerName>Dave Winer</ownerName>
		<ownerId>http://davewiner.com/</ownerId>
		<expansionState>1, 2, 3, 8, 13, 14, 16, 18</expansionState>
		<vertScrollState>1</vertScrollState>
		<windowTop>299</windowTop>
		<windowLeft>1239</windowLeft>
		<windowBottom>1298</windowBottom>
		<windowRight>2412</windowRight>
		</head>
	<body>
		<outline text="on buildTheTables ()">
			<outline text="Changes" isComment="true">
				<outline text="8/13/12; 7:43:26 AM by DW">
					<outline text="Created."/>
					</outline>
				</outline>
			<outline text="local (adrtable = @workspace.userlandSamples.buildReplacetables.replaceTable)"/>
			<outline text="bundle //create table, add characters 128 through 255">
				<outline text="local (i)"/>
				<outline text="new (tabletype, adrtable)"/>
				<outline text="for i = 128 to 255">
					<outline text="adrtable^.[char (i)] = &quot;&amp;#&quot; + i + &quot;;&quot;"/>
					</outline>
				</outline>
			<outline text="bundle //add entities for symbols and Greek letters" isComment="true">
				<outline text="http://htmlhelp.com/reference/html40/entities/symbols.html" isComment="true"/>
				<outline text="local (s = string (workspace.buildnewreplacetable.w3ctext), xstruct)"/>
				<outline text="xml.compile (s, @xstruct)"/>
				<outline text="workspace.userlandSamples.buildReplacetables.w3cstruct = xstruct" isComment="true"/>
				<outline text=""/>
				<outline text="local (adrtbody = xml.getaddress (@xstruct, &quot;tbody&quot;), adr, val, name, num)"/>
				<outline text="for adr in adrtbody">
					<outline text="val = adr^ [2]"/>
					<outline text="name = adr^ [3]"/>
					<outline text="bundle //do the bit twiddling">
						<outline text="name = string.delete (name, 1, 2)"/>
						<outline text="name = string.mid (name, 1, sizeof (name) - 1)"/>
						<outline text="num = number (name)"/>
						<outline text="name = char (bit.logicaland (num, 255)) + char (bit.shiftright (num, 8))"/>
						</outline>
					<outline text="adrtable^.[name] = val"/>
					</outline>
				</outline>
			<outline text="bundle //build the inverted table">
				<outline text="local (adrinvertedtable1 = @workspace.userlandSamples.buildReplacetables.replaceTableInverted1, adr)"/>
				<outline text="local (adrinvertedtable2 = @workspace.userlandSamples.buildReplacetables.replaceTableInverted2)"/>
				<outline text="new (tabletype, adrinvertedtable1)"/>
				<outline text="new (tabletype, adrinvertedtable2)"/>
				<outline text="for adr in adrtable">
					<outline text="if defined (adrinvertedtable1^.[adr^])">
						<outline text="adrinvertedtable2^.[adr^] = nameof (adr^)"/>
						</outline>
					<outline text="else">
						<outline text="adrinvertedtable1^.[adr^] = nameof (adr^)"/>
						</outline>
					</outline>
				</outline>
			</outline>
		<outline text="bundle //test code">
			<outline text="buildTheTables ()"/>
			</outline>
		</body>
	</opml>
