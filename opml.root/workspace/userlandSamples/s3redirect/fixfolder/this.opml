<?xml version="1.0" encoding="ISO-8859-1"?>
<!-- OPML generated by OPML Editor v10.1b19 on Sat, 03 Jun 2017 03:29:18 GMT -->
<opml version="2.0">
	<head>
		<title>workspace.userlandSamples.s3redirect.fixfolder</title>
		<dateCreated>Wed, 25 Jul 2012 00:32:21 GMT</dateCreated>
		<dateModified>Sat, 03 Jun 2017 03:29:18 GMT</dateModified>
		<ownerName>Dave Winer</ownerName>
		<ownerId>http://davewiner.com/</ownerId>
		<expansionState>1, 2, 3, 7, 9, 16</expansionState>
		<vertScrollState>1</vertScrollState>
		<windowTop>285</windowTop>
		<windowLeft>1096</windowLeft>
		<windowBottom>811</windowBottom>
		<windowRight>2026</windowRight>
		</head>
	<body>
		<outline text="on fixfolder ()">
			<outline text="Changes" isComment="true">
				<outline text="7/24/12; 8:32:27 PM by DW">
					<outline text="A utility script that adds HTML-level redirects to a folder on S3, redirecting from files without extensions to the .html equivalent. Manila sites that are converted to S3 need this kind of redirecting, because Manila didn't require extensions. Turns out S3 doesn't either, but my conversion script adds them. :-("/>
					</outline>
				</outline>
			<outline text="local (bucket = &quot;/bloggercon.scripting.com/&quot;, foldertable, path)"/>
			<outline text="s3.getbucket (bucket, @foldertable)"/>
			<outline text="for adrfile in @foldertable">
				<outline text="path = bucket + nameof (adrfile^)"/>
				<outline text="if path endswith &quot;.html&quot;">
					<outline text="local (t)"/>
					<outline text="new (tabletype, @t)"/>
					<outline text="t.url = string.lastfield (nameof (adrfile^), &quot;/&quot;)"/>
					<outline text="path = string.delete (path, sizeof (path) - 4, 5)"/>
					<outline text="s = string.multiplereplaceall (string (workspace.userlandsamples.s3redirect.template), @t, false, &quot;&lt;%&quot;, &quot;%&gt;&quot;)"/>
					<outline text="s3.newobject (path, s, type:&quot;text/html&quot;)"/>
					</outline>
				</outline>
			</outline>
		<outline text="bundle //test code">
			<outline text="fixfolder ()"/>
			</outline>
		</body>
	</opml>
